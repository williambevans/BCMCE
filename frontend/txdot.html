<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TxDOT Materials Terminal | BCMCE Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #000000;
      --bg-secondary: #0a0a0a;
      --bg-tertiary: #111111;
      --bg-hover: #1a1a1a;
      --border-primary: #2a2a2a;
      --border-highlight: #3a3a3a;
      --text-primary: #e5e5e5;
      --text-secondary: #a0a0a0;
      --text-muted: #666666;
      --amber-primary: #ff9500;
      --amber-secondary: #d97706;
      --amber-glow: rgba(245, 158, 11, 0.15);
      --green-primary: #00ff88;
      --green-secondary: #16a34a;
      --cyan-primary: #00d9ff;
      --red-primary: #ff3b3b;
      --blue-primary: #0066ff;
    }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow: hidden;
    }

    /* Scanline Effect */
    .scanlines {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1000;
      opacity: 0.03;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.4) 2px,
        rgba(0, 0, 0, 0.4) 4px
      );
    }

    /* Header */
    .header {
      background: linear-gradient(90deg, #0a0a0a 0%, #000000 50%, #0a0a0a 100%);
      border-bottom: 2px solid var(--amber-secondary);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--amber-primary), transparent);
      opacity: 0.5;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      font-size: 24px;
    }

    .logo-text {
      font-size: 20px;
      font-weight: 700;
      color: var(--amber-primary);
      letter-spacing: 2px;
      text-shadow: 0 0 20px var(--amber-glow);
    }

    .logo-subtitle {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .live-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--green-primary);
    }

    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--green-primary);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .timestamp {
      font-size: 11px;
      color: var(--text-secondary);
    }

    .btn {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      color: var(--text-primary);
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-family: inherit;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: all 0.2s;
    }

    .btn:hover {
      background: var(--bg-hover);
      border-color: var(--amber-primary);
      color: var(--amber-primary);
    }

    /* Stats Bar */
    .stats-bar {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-primary);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-value {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .stat-value.amber { color: var(--amber-primary); }
    .stat-value.green { color: var(--green-primary); }
    .stat-value.cyan { color: var(--cyan-primary); }

    .stat-divider {
      width: 1px;
      height: 20px;
      background: var(--border-primary);
    }

    /* Main Container */
    .main-container {
      display: flex;
      height: calc(100vh - 110px);
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-primary);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-header {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-primary);
      font-size: 11px;
      font-weight: 600;
      color: var(--amber-primary);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .filter-section {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-primary);
    }

    .filter-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 8px;
      letter-spacing: 0.5px;
    }

    .search-input {
      width: 100%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      padding: 10px 12px;
      font-family: inherit;
      font-size: 12px;
      color: var(--text-primary);
      transition: all 0.2s;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--amber-primary);
      box-shadow: 0 0 0 2px var(--amber-glow);
    }

    .search-input::placeholder {
      color: var(--text-muted);
    }

    .category-list {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }

    .category-item {
      padding: 10px 12px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.15s;
      margin-bottom: 2px;
      font-size: 12px;
    }

    .category-item:hover {
      background: var(--bg-hover);
    }

    .category-item.active {
      background: var(--amber-glow);
      border: 1px solid rgba(245, 158, 11, 0.3);
      color: var(--amber-primary);
    }

    .category-count {
      font-size: 10px;
      color: var(--text-muted);
      background: var(--bg-tertiary);
      padding: 2px 6px;
      border-radius: 10px;
    }

    .category-item.active .category-count {
      color: var(--amber-primary);
      background: rgba(245, 158, 11, 0.2);
    }

    /* Content Area */
    .content-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-primary);
    }

    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .view-toggle {
      display: flex;
      gap: 4px;
      background: var(--bg-tertiary);
      padding: 4px;
      border-radius: 4px;
      border: 1px solid var(--border-primary);
    }

    .view-btn {
      background: transparent;
      border: none;
      color: var(--text-muted);
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 10px;
      text-transform: uppercase;
      transition: all 0.2s;
    }

    .view-btn.active {
      background: var(--amber-primary);
      color: #000;
    }

    /* Table View */
    .table-container {
      flex: 1;
      overflow: auto;
      background: var(--bg-primary);
    }

    .materials-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .materials-table th {
      position: sticky;
      top: 0;
      background: var(--bg-secondary);
      padding: 12px 14px;
      text-align: left;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      font-size: 10px;
      letter-spacing: 0.5px;
      border-bottom: 2px solid var(--border-primary);
      white-space: nowrap;
      z-index: 10;
    }

    .materials-table th:hover {
      color: var(--amber-primary);
      cursor: pointer;
    }

    .materials-table td {
      padding: 12px 14px;
      border-bottom: 1px solid var(--border-primary);
      white-space: nowrap;
    }

    .materials-table tr {
      background: var(--bg-primary);
      transition: background 0.15s;
      cursor: pointer;
    }

    .materials-table tr:nth-child(even) {
      background: var(--bg-secondary);
    }

    .materials-table tr:hover {
      background: var(--bg-hover);
    }

    .material-code {
      font-weight: 600;
      color: var(--cyan-primary);
      font-family: 'JetBrains Mono', monospace;
    }

    .material-name {
      color: var(--text-primary);
    }

    .material-spec {
      color: var(--text-secondary);
      font-size: 11px;
    }

    .price-value {
      color: var(--green-primary);
      font-weight: 600;
      font-variant-numeric: tabular-nums;
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 3px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .badge-active {
      background: rgba(0, 255, 136, 0.15);
      color: var(--green-primary);
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    .badge-limited {
      background: rgba(255, 149, 0, 0.15);
      color: var(--amber-primary);
      border: 1px solid rgba(255, 149, 0, 0.3);
    }

    .badge-seasonal {
      background: rgba(0, 102, 255, 0.15);
      color: var(--blue-primary);
      border: 1px solid rgba(0, 102, 255, 0.3);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(4px);
    }

    .modal.visible {
      display: flex;
    }

    .modal-content {
      background: var(--bg-secondary);
      border: 2px solid var(--amber-secondary);
      border-radius: 8px;
      width: 90%;
      max-width: 800px;
      max-height: 85vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 0 40px rgba(255, 149, 0, 0.3);
    }

    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border-primary);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
    }

    .modal-title {
      font-size: 18px;
      color: var(--amber-primary);
      font-weight: 700;
    }

    .modal-close {
      background: transparent;
      border: 1px solid var(--border-primary);
      color: var(--text-secondary);
      width: 32px;
      height: 32px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      font-size: 20px;
    }

    .modal-close:hover {
      background: var(--bg-hover);
      border-color: var(--amber-primary);
      color: var(--amber-primary);
    }

    .modal-body {
      padding: 20px;
      overflow-y: auto;
      flex: 1;
    }

    .detail-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }

    .detail-card {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      padding: 14px;
    }

    .detail-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 6px;
      letter-spacing: 0.5px;
    }

    .detail-value {
      font-size: 14px;
      color: var(--text-primary);
      font-weight: 600;
    }

    .spec-section {
      margin-top: 20px;
    }

    .spec-title {
      font-size: 12px;
      color: var(--amber-primary);
      text-transform: uppercase;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-primary);
    }

    .spec-list {
      list-style: none;
    }

    .spec-item {
      padding: 8px 0;
      border-bottom: 1px solid var(--border-primary);
      font-size: 12px;
      display: flex;
      justify-content: space-between;
    }

    .spec-item:last-child {
      border-bottom: none;
    }

    .spec-key {
      color: var(--text-secondary);
    }

    .spec-val {
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Footer */
    .footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-primary);
      padding: 8px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: var(--text-muted);
    }

    .footer-left, .footer-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-primary);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--border-highlight);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }
      .detail-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="scanlines"></div>

  <!-- Header -->
  <header class="header">
    <div class="logo">
      <div class="logo-icon">üõ£Ô∏è</div>
      <div>
        <div class="logo-text">TxDOT MATERIALS</div>
        <div class="logo-subtitle">Texas Department of Transportation</div>
      </div>
    </div>
    <div class="header-right">
      <div class="live-indicator">
        <span class="live-dot"></span>
        <span>LIVE</span>
      </div>
      <div class="timestamp" id="timestamp"></div>
      <button class="btn" onclick="window.location.href='hh-dashboard.html'">‚Üê DASHBOARD</button>
    </div>
  </header>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-item">
      <span class="stat-label">Total Materials</span>
      <span class="stat-value amber" id="totalMaterials">0</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Categories</span>
      <span class="stat-value cyan" id="totalCategories">0</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Avg Price</span>
      <span class="stat-value green" id="avgPrice">$0.00</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Last Updated</span>
      <span class="stat-value" id="lastUpdated">2026-01-29</span>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">Material Categories</div>

      <div class="filter-section">
        <div class="filter-label">Search Materials</div>
        <input type="text" class="search-input" id="searchInput" placeholder="Item code or description...">
      </div>

      <div class="category-list" id="categoryList"></div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <div class="toolbar">
        <div class="toolbar-left">
          <div class="view-toggle">
            <button class="view-btn active" data-view="table">TABLE</button>
            <button class="view-btn" data-view="grid">GRID</button>
          </div>
          <span style="color: var(--text-muted); font-size: 11px;" id="resultsCount">0 materials</span>
        </div>
        <div>
          <button class="btn" onclick="exportData()">EXPORT CSV</button>
        </div>
      </div>

      <div class="table-container">
        <table class="materials-table" id="materialsTable">
          <thead>
            <tr>
              <th>ITEM CODE</th>
              <th>DESCRIPTION</th>
              <th>SPECIFICATION</th>
              <th>UNIT</th>
              <th>PRICE</th>
              <th>AVAILABILITY</th>
              <th>ACTIONS</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-left">
      <span>TxDOT Materials Terminal v1.0</span>
      <span>|</span>
      <span>BCMCE Integration</span>
    </div>
    <div class="footer-right">
      <span>‚óè Systems Nominal</span>
      <span>|</span>
      <span>Data Source: TxDOT Specification Database</span>
    </div>
  </footer>

  <!-- Material Detail Modal -->
  <div class="modal" id="detailModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle"></div>
        <button class="modal-close" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    // TxDOT Materials Database
    const materialsData = [
      // Aggregates
      { code: "AGG-100", name: "Crushed Limestone Base", category: "Aggregates", spec: "Item 247", unit: "CY", price: 28.50, availability: "Active", grade: "Grade 1", density: "150 pcf", sieve: "#4-3/4\"", uses: "Base course, flexible pavement" },
      { code: "AGG-110", name: "Crushed Concrete Base", category: "Aggregates", spec: "Item 276", unit: "CY", price: 22.75, availability: "Active", grade: "Grade 2", density: "140 pcf", sieve: "#4-2\"", uses: "Recycled base, parking lots" },
      { code: "AGG-120", name: "Flexible Base", category: "Aggregates", spec: "Item 247", unit: "CY", price: 31.00, availability: "Active", grade: "Grade 1", density: "145 pcf", sieve: "#200-2\"", uses: "Flexible pavement base" },
      { code: "AGG-130", name: "Road Base Gravel", category: "Aggregates", spec: "Item 247", unit: "CY", price: 26.00, availability: "Active", grade: "Grade 3", density: "135 pcf", sieve: "#4-1.5\"", uses: "County road base" },
      { code: "AGG-140", name: "Riprap Limestone", category: "Aggregates", spec: "Item 423", unit: "CY", price: 45.00, availability: "Limited", grade: "Class 1", density: "165 pcf", sieve: "12\"-18\"", uses: "Erosion control, channel protection" },

      // Asphalt
      { code: "ASP-200", name: "Hot Mix Asphalt Type D", category: "Asphalt", spec: "Item 340", unit: "TON", price: 95.00, availability: "Active", grade: "PG 70-22", thickness: "Variable", density: "148 pcf", uses: "Surface course, high traffic" },
      { code: "ASP-210", name: "Hot Mix Asphalt Type C", category: "Asphalt", spec: "Item 340", unit: "TON", price: 89.00, availability: "Active", grade: "PG 64-22", thickness: "Variable", density: "145 pcf", uses: "Binder course, medium traffic" },
      { code: "ASP-220", name: "Stone Matrix Asphalt", category: "Asphalt", spec: "Item 342", unit: "TON", price: 125.00, availability: "Active", grade: "PG 76-22", thickness: "1.5\"-2\"", density: "150 pcf", uses: "High-stress areas, intersections" },
      { code: "ASP-230", name: "Asphalt Stabilized Base", category: "Asphalt", spec: "Item 275", unit: "TON", price: 72.00, availability: "Active", grade: "PG 64-22", thickness: "4\"-8\"", density: "140 pcf", uses: "Base stabilization" },
      { code: "ASP-240", name: "Emulsified Asphalt CSS-1", category: "Asphalt", spec: "Item 300", unit: "GAL", price: 4.25, availability: "Seasonal", grade: "CSS-1", viscosity: "20-100", residue: "57% min", uses: "Tack coat, fog seal" },

      // Concrete
      { code: "CON-300", name: "Portland Cement Concrete Class P", category: "Concrete", spec: "Item 360", unit: "CY", price: 165.00, availability: "Active", strength: "3600 psi", slump: "2\"-4\"", airentrain: "6% ¬±1.5", uses: "Pavement, high traffic" },
      { code: "CON-310", name: "Portland Cement Concrete Class S", category: "Concrete", spec: "Item 360", unit: "CY", price: 145.00, availability: "Active", strength: "3000 psi", slump: "2\"-5\"", airentrain: "5% ¬±1.5", uses: "Structures, barriers" },
      { code: "CON-320", name: "Concrete Class F (Flexural)", category: "Concrete", spec: "Item 360", unit: "CY", price: 175.00, availability: "Active", strength: "650 psi flex", slump: "2\"-3\"", airentrain: "6%", uses: "CRCP, continuously reinforced" },
      { code: "CON-330", name: "Rapid Strength Concrete", category: "Concrete", spec: "Item 421", unit: "CY", price: 245.00, availability: "Limited", strength: "2500 psi @ 6hr", slump: "4\"-8\"", airentrain: "6%", uses: "Fast track paving, repairs" },
      { code: "CON-340", name: "Flowable Fill (CLSM)", category: "Concrete", spec: "Item 438", unit: "CY", price: 85.00, availability: "Active", strength: "150 psi max", slump: "8\"+", flowable: "Yes", uses: "Backfill, utility trenches" },

      // Steel & Reinforcement
      { code: "STL-400", name: "Reinforcing Steel Grade 60", category: "Steel", spec: "Item 440", unit: "LB", price: 0.85, availability: "Active", grade: "Grade 60", yield: "60 ksi", tensile: "90 ksi", uses: "Concrete reinforcement" },
      { code: "STL-410", name: "Epoxy Coated Rebar", category: "Steel", spec: "Item 442", unit: "LB", price: 1.15, availability: "Active", grade: "Grade 60", coating: "Epoxy 7-12 mil", yield: "60 ksi", uses: "Bridge decks, corrosive environments" },
      { code: "STL-420", name: "Structural Steel A709 Grade 50", category: "Steel", spec: "Item 448", unit: "LB", price: 1.45, availability: "Active", grade: "A709 Gr50", yield: "50 ksi", tensile: "65 ksi", uses: "Bridge girders, structural members" },
      { code: "STL-430", name: "Wire Rope Safety Cable", category: "Steel", spec: "Item 422", unit: "LF", price: 12.50, availability: "Active", diameter: "3/4\"", breaking: "26,000 lbs", strand: "7x19", uses: "Guardrail, cable barriers" },
      { code: "STL-440", name: "Steel H-Piles HP 12x53", category: "Steel", spec: "Item 452", unit: "LF", price: 42.00, availability: "Active", section: "HP12x53", weight: "53 lb/ft", yield: "50 ksi", uses: "Deep foundations, retaining walls" },

      // Signing & Marking
      { code: "SGN-500", name: "Reflective Sheeting Type IV", category: "Signing", spec: "Item 670", unit: "SF", price: 15.75, availability: "Active", type: "High Intensity", warranty: "7 years", retroreflect: "Type IV", uses: "Traffic signs, high speed roads" },
      { code: "SGN-510", name: "Reflective Sheeting Type XI", category: "Signing", spec: "Item 670", unit: "SF", price: 28.50, availability: "Active", type: "Diamond Grade", warranty: "12 years", retroreflect: "Type XI", uses: "Premium signs, critical locations" },
      { code: "SGN-520", name: "Thermoplastic Pavement Marking", category: "Signing", spec: "Item 666", unit: "LF", price: 0.85, availability: "Seasonal", thickness: "90 mil", retroreflect: "250 mcd", durability: "3-5 years", uses: "Lane markings, crosswalks" },
      { code: "SGN-530", name: "Raised Pavement Markers", category: "Signing", spec: "Item 666", unit: "EA", price: 4.25, availability: "Active", type: "Reflective", color: "White/Yellow", adhesive: "Epoxy", uses: "Lane delineation, fog conditions" },
      { code: "SGN-540", name: "Traffic Paint Water-Based", category: "Signing", spec: "Item 666", unit: "GAL", price: 28.00, availability: "Seasonal", type: "Water-based", coverage: "150-200 ft¬≤/gal", dryingtime: "15-30 min", uses: "Temporary markings, parking lots" },

      // Drainage
      { code: "DRN-600", name: "RCP Pipe Class III 24\"", category: "Drainage", spec: "Item 500", unit: "LF", price: 45.00, availability: "Active", material: "Reinforced Concrete", diameter: "24\"", class: "Class III", uses: "Storm drainage, culverts" },
      { code: "DRN-610", name: "HDPE Pipe 18\" DR 13.5", category: "Drainage", spec: "Item 502", unit: "LF", price: 28.50, availability: "Active", material: "HDPE", diameter: "18\"", dr: "DR 13.5", uses: "Drainage, low pressure applications" },
      { code: "DRN-620", name: "Metal End Section 18\"", category: "Drainage", spec: "Item 506", unit: "EA", price: 285.00, availability: "Active", material: "Galvanized Steel", diameter: "18\"", gauge: "14 ga", uses: "Culvert ends, slope protection" },
      { code: "DRN-630", name: "Drainage Inlet Type C", category: "Drainage", spec: "Item 520", unit: "EA", price: 2850.00, availability: "Active", type: "Type C", material: "Concrete", grate: "Cast iron", uses: "Curb inlet, urban drainage" },
      { code: "DRN-640", name: "Filter Fabric Type II", category: "Drainage", spec: "Item 550", unit: "SY", price: 2.45, availability: "Active", type: "Geotextile", weight: "8 oz/sy", permeability: "125 gal/min/sf", uses: "Separation, drainage, erosion" },

      // Safety Devices
      { code: "SAF-700", name: "Steel Beam Guardrail", category: "Safety", spec: "Item 422", unit: "LF", price: 32.00, availability: "Active", type: "W-Beam", height: "27\"", thickness: "12 gauge", uses: "Roadside barrier, median" },
      { code: "SAF-710", name: "End Terminal (MASH TL-3)", category: "Safety", spec: "Item 422", unit: "EA", price: 2450.00, availability: "Active", crashtest: "MASH TL-3", type: "Tangent", material: "Steel", uses: "Guardrail end treatment" },
      { code: "SAF-720", name: "Portable Concrete Barrier", category: "Safety", spec: "Item 472", unit: "LF", price: 125.00, availability: "Active", type: "Jersey", height: "32\"", weight: "4000 lb/section", uses: "Work zone traffic control" },
      { code: "SAF-730", name: "Impact Attenuator (MASH TL-3)", category: "Safety", spec: "Item 422", unit: "EA", price: 8500.00, availability: "Limited", crashtest: "MASH TL-3", type: "Redirective", speed: "70 mph", uses: "Gore areas, fixed objects" },
      { code: "SAF-740", name: "Crash Cushion Array", category: "Safety", spec: "Item 422", unit: "EA", price: 12500.00, availability: "Limited", type: "Non-gating", length: "Variable", speed: "70 mph", uses: "Bridge piers, toll plazas" },

      // Earthwork
      { code: "ERT-800", name: "Embankment Material", category: "Earthwork", spec: "Item 132", unit: "CY", price: 8.50, availability: "Active", type: "Select fill", compaction: "95% standard", moisture: "¬±2% optimum", uses: "Roadway embankment" },
      { code: "ERT-810", name: "Topsoil Furnish & Place", category: "Earthwork", spec: "Item 161", unit: "CY", price: 32.00, availability: "Seasonal", type: "Topsoil", depth: "6\" typical", organic: "5-15%", uses: "Landscaping, vegetation" },
      { code: "ERT-820", name: "Lime Treatment 6%", category: "Earthwork", spec: "Item 260", unit: "SY", price: 3.25, availability: "Active", lime: "6% by weight", depth: "12\"", mixing: "In-place", uses: "Subgrade stabilization" },
      { code: "ERT-830", name: "Geogrid Reinforcement", category: "Earthwork", spec: "Item 448", unit: "SY", price: 4.75, availability: "Active", type: "Biaxial", strength: "2000 lb/ft", aperture: "1\" x 1\"", uses: "Base reinforcement, soft soils" },

      // Misc Materials
      { code: "MSC-900", name: "Seeding Mixture Native", category: "Miscellaneous", spec: "Item 164", unit: "LB", price: 12.50, availability: "Seasonal", type: "Native mix", coverage: "50 lb/acre", germination: "85% min", uses: "Erosion control, slopes" },
      { code: "MSC-910", name: "Hydraulic Mulch", category: "Miscellaneous", spec: "Item 164", unit: "LB", price: 0.85, availability: "Active", type: "Wood fiber", coverage: "2000 lb/acre", application: "Hydraulic", uses: "Temporary erosion control" },
      { code: "MSC-920", name: "Silt Fence", category: "Miscellaneous", spec: "Item 552", unit: "LF", price: 3.25, availability: "Active", fabric: "Geotextile", height: "36\"", posts: "Wood/Steel", uses: "Sediment control, perimeter" },
      { code: "MSC-930", name: "Construction Fence", category: "Miscellaneous", spec: "Item 551", unit: "LF", price: 2.15, availability: "Active", type: "Orange poly", height: "48\"", mesh: "4\"", uses: "Work zone delineation" }
    ];

    let filteredMaterials = [...materialsData];
    let currentCategory = 'All';

    // Initialize
    function init() {
      updateTimestamp();
      setInterval(updateTimestamp, 1000);
      renderCategories();
      renderTable();
      updateStats();
      setupEventListeners();
    }

    function updateTimestamp() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      document.getElementById('timestamp').textContent = `${timeStr} ${dateStr}`;
    }

    function renderCategories() {
      const categories = ['All', ...new Set(materialsData.map(m => m.category))];
      const counts = categories.map(cat => ({
        name: cat,
        count: cat === 'All' ? materialsData.length : materialsData.filter(m => m.category === cat).length
      }));

      const list = document.getElementById('categoryList');
      list.innerHTML = counts.map(c => `
        <div class="category-item ${c.name === currentCategory ? 'active' : ''}" onclick="filterCategory('${c.name}')">
          <span>${c.name}</span>
          <span class="category-count">${c.count}</span>
        </div>
      `).join('');
    }

    function filterCategory(category) {
      currentCategory = category;
      if (category === 'All') {
        filteredMaterials = [...materialsData];
      } else {
        filteredMaterials = materialsData.filter(m => m.category === category);
      }
      renderCategories();
      renderTable();
      updateStats();
    }

    function renderTable() {
      const tbody = document.getElementById('tableBody');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();

      let materials = filteredMaterials;
      if (searchTerm) {
        materials = materials.filter(m =>
          m.code.toLowerCase().includes(searchTerm) ||
          m.name.toLowerCase().includes(searchTerm) ||
          m.spec.toLowerCase().includes(searchTerm)
        );
      }

      tbody.innerHTML = materials.map(m => `
        <tr onclick="showDetail('${m.code}')">
          <td><span class="material-code">${m.code}</span></td>
          <td><span class="material-name">${m.name}</span></td>
          <td><span class="material-spec">${m.spec}</span></td>
          <td>${m.unit}</td>
          <td><span class="price-value">$${m.price.toFixed(2)}</span></td>
          <td><span class="badge badge-${m.availability.toLowerCase()}">${m.availability}</span></td>
          <td><button class="btn" style="padding: 4px 8px; font-size: 10px;" onclick="event.stopPropagation(); showDetail('${m.code}')">VIEW</button></td>
        </tr>
      `).join('');

      document.getElementById('resultsCount').textContent = `${materials.length} materials`;
    }

    function showDetail(code) {
      const material = materialsData.find(m => m.code === code);
      if (!material) return;

      document.getElementById('modalTitle').textContent = `${material.code} - ${material.name}`;

      const specs = Object.entries(material).filter(([key]) =>
        !['code', 'name', 'category', 'price', 'unit', 'availability'].includes(key)
      );

      document.getElementById('modalBody').innerHTML = `
        <div class="detail-grid">
          <div class="detail-card">
            <div class="detail-label">Item Code</div>
            <div class="detail-value" style="color: var(--cyan-primary)">${material.code}</div>
          </div>
          <div class="detail-card">
            <div class="detail-label">Category</div>
            <div class="detail-value">${material.category}</div>
          </div>
          <div class="detail-card">
            <div class="detail-label">Unit Price</div>
            <div class="detail-value" style="color: var(--green-primary)">$${material.price.toFixed(2)} / ${material.unit}</div>
          </div>
          <div class="detail-card">
            <div class="detail-label">Availability</div>
            <div class="detail-value"><span class="badge badge-${material.availability.toLowerCase()}">${material.availability}</span></div>
          </div>
        </div>

        <div class="spec-section">
          <div class="spec-title">Technical Specifications</div>
          <ul class="spec-list">
            ${specs.map(([key, val]) => `
              <li class="spec-item">
                <span class="spec-key">${key.charAt(0).toUpperCase() + key.slice(1)}:</span>
                <span class="spec-val">${val}</span>
              </li>
            `).join('')}
          </ul>
        </div>

        <div class="spec-section">
          <div class="spec-title">Notes</div>
          <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">
            Prices are estimates and subject to change based on market conditions, delivery location, and quantity.
            Contact TxDOT approved suppliers for current pricing and availability. All materials must meet current
            TxDOT specifications and testing requirements.
          </p>
        </div>
      `;

      document.getElementById('detailModal').classList.add('visible');
    }

    function closeModal() {
      document.getElementById('detailModal').classList.remove('visible');
    }

    function updateStats() {
      document.getElementById('totalMaterials').textContent = filteredMaterials.length;
      const categories = new Set(filteredMaterials.map(m => m.category));
      document.getElementById('totalCategories').textContent = categories.size;

      const avgPrice = filteredMaterials.reduce((sum, m) => sum + m.price, 0) / filteredMaterials.length;
      document.getElementById('avgPrice').textContent = `$${avgPrice.toFixed(2)}`;
    }

    function setupEventListeners() {
      document.getElementById('searchInput').addEventListener('input', renderTable);

      // Close modal on outside click
      document.getElementById('detailModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
      });

      // View toggle buttons
      document.querySelectorAll('.view-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
        });
      });
    }

    function exportData() {
      const csv = [
        ['Item Code', 'Description', 'Specification', 'Unit', 'Price', 'Availability', 'Category'],
        ...filteredMaterials.map(m => [m.code, m.name, m.spec, m.unit, m.price, m.availability, m.category])
      ].map(row => row.join(',')).join('\n');

      const blob = new Blob([csv], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `txdot_materials_${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      window.URL.revokeObjectURL(url);
    }

    // Initialize on load
    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
