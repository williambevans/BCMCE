<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAICounty - Texas County Intelligence System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #000000;
      --bg-secondary: #0a0a0a;
      --bg-tertiary: #111111;
      --bg-hover: #1a1a1a;
      --border-primary: #2a2a2a;
      --border-highlight: #3a3a3a;
      --text-primary: #e5e5e5;
      --text-secondary: #a0a0a0;
      --text-muted: #666666;
      --amber-primary: #f59e0b;
      --amber-secondary: #d97706;
      --amber-glow: rgba(245, 158, 11, 0.15);
      --green-primary: #22c55e;
      --green-secondary: #16a34a;
      --cyan-primary: #06b6d4;
      --cyan-secondary: #0891b2;
      --red-primary: #ef4444;
      --purple-primary: #a855f7;
      --pink-primary: #ec4899;
    }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow: hidden;
    }

    /* Scanline Effect */
    .scanlines {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1000;
      opacity: 0.03;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.4) 2px,
        rgba(0, 0, 0, 0.4) 4px
      );
    }

    /* Header */
    .header {
      background: linear-gradient(90deg, #0a0a0a 0%, #000000 50%, #0a0a0a 100%);
      border-bottom: 2px solid var(--amber-secondary);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--amber-primary), transparent);
      opacity: 0.5;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-icon {
      width: 28px;
      height: 28px;
      color: var(--amber-primary);
    }

    .logo-text {
      font-size: 20px;
      font-weight: 700;
      color: var(--amber-primary);
      letter-spacing: 2px;
      text-shadow: 0 0 20px var(--amber-glow);
    }

    .logo-subtitle {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .live-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--green-primary);
    }

    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--green-primary);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .timestamp {
      font-size: 11px;
      color: var(--text-secondary);
    }

    /* Stats Bar */
    .stats-bar {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-primary);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-value {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .stat-value.amber { color: var(--amber-primary); }
    .stat-value.green { color: var(--green-primary); }
    .stat-value.cyan { color: var(--cyan-primary); }
    .stat-value.purple { color: var(--purple-primary); }

    .stat-divider {
      width: 1px;
      height: 20px;
      background: var(--border-primary);
    }

    .bcme-badge {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(6, 182, 212, 0.15));
      border: 1px solid rgba(168, 85, 247, 0.3);
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 10px;
      color: var(--purple-primary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .bcme-badge:hover {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.25), rgba(6, 182, 212, 0.25));
      border-color: rgba(168, 85, 247, 0.5);
    }

    .bcme-badge svg {
      width: 12px;
      height: 12px;
    }

    /* Main Layout */
    .main-container {
      display: flex;
      height: calc(100vh - 110px);
      position: relative;
    }

    /* Sidebar Overlay */
    .sidebar-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 900;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .sidebar-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    /* Left Panel - Collapsible Sidebar */
    .left-panel {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 300px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-primary);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 950;
      transform: translateX(-100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
    }

    .left-panel.open {
      transform: translateX(0);
    }

    /* Sidebar Header with Close Button */
    .sidebar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
      border-bottom: 2px solid var(--amber-secondary);
      background: linear-gradient(90deg, #0a0a0a 0%, #000000 100%);
    }

    .sidebar-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sidebar-title svg {
      width: 20px;
      height: 20px;
      color: var(--amber-primary);
    }

    .sidebar-title span {
      font-size: 14px;
      font-weight: 600;
      color: var(--amber-primary);
      letter-spacing: 1px;
    }

    .sidebar-close {
      background: none;
      border: 1px solid var(--border-primary);
      color: var(--text-secondary);
      width: 32px;
      height: 32px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .sidebar-close:hover {
      background: var(--bg-hover);
      border-color: var(--amber-primary);
      color: var(--amber-primary);
    }

    .sidebar-close svg {
      width: 18px;
      height: 18px;
    }

    /* Menu Toggle Button */
    .menu-toggle {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      color: var(--text-secondary);
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      margin-right: 12px;
    }

    .menu-toggle:hover {
      background: var(--bg-hover);
      border-color: var(--amber-primary);
      color: var(--amber-primary);
    }

    .menu-toggle svg {
      width: 20px;
      height: 20px;
    }

    /* Swipe Handle Indicator */
    .swipe-handle {
      position: fixed;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 80px;
      background: linear-gradient(90deg, var(--amber-glow), transparent);
      border-radius: 0 8px 8px 0;
      z-index: 800;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.5;
      transition: opacity 0.2s, width 0.2s;
    }

    .swipe-handle:hover {
      opacity: 1;
      width: 24px;
    }

    .swipe-handle::after {
      content: '';
      width: 4px;
      height: 40px;
      background: var(--amber-primary);
      border-radius: 2px;
      opacity: 0.6;
    }

    .swipe-handle.hidden {
      display: none;
    }

    .panel-header {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-primary);
      font-size: 11px;
      font-weight: 600;
      color: var(--amber-primary);
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-header svg {
      width: 14px;
      height: 14px;
    }

    .filter-section {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-primary);
    }

    .filter-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 8px;
      letter-spacing: 0.5px;
    }

    .search-wrapper {
      position: relative;
    }

    .search-input {
      width: 100%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      padding: 10px 32px 10px 12px;
      font-family: inherit;
      font-size: 12px;
      color: var(--text-primary);
      transition: all 0.2s;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--amber-primary);
      box-shadow: 0 0 0 2px var(--amber-glow);
    }

    .search-input::placeholder {
      color: var(--text-muted);
    }

    .clear-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 4px;
      display: none;
    }

    .clear-btn.visible {
      display: block;
    }

    .clear-btn:hover {
      color: var(--text-primary);
    }

    .clear-btn svg {
      width: 14px;
      height: 14px;
    }

    .region-select {
      width: 100%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      padding: 10px 12px;
      font-family: inherit;
      font-size: 12px;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .region-select:focus {
      outline: none;
      border-color: var(--amber-primary);
    }

    .region-list {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }

    .region-item {
      padding: 10px 12px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.15s;
      margin-bottom: 2px;
    }

    .region-item:hover {
      background: var(--bg-hover);
    }

    .region-item.active {
      background: var(--amber-glow);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .region-name {
      font-size: 12px;
      color: var(--text-primary);
    }

    .region-count {
      font-size: 10px;
      color: var(--text-muted);
    }

    .region-count span {
      color: var(--cyan-primary);
    }

    /* Center Panel - Data Table */
    .center-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      min-width: 0;
    }

    .table-container {
      flex: 1;
      overflow: auto;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .data-table th {
      position: sticky;
      top: 0;
      background: var(--bg-secondary);
      padding: 12px 14px;
      text-align: left;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      font-size: 10px;
      letter-spacing: 0.5px;
      border-bottom: 2px solid var(--border-primary);
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
    }

    .data-table th:hover {
      color: var(--amber-primary);
    }

    .data-table th.sorted {
      color: var(--amber-primary);
    }

    .sort-icon {
      display: inline-block;
      margin-left: 4px;
      opacity: 0.5;
    }

    .data-table th.sorted .sort-icon {
      opacity: 1;
    }

    .data-table td {
      padding: 10px 14px;
      border-bottom: 1px solid var(--border-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
    }

    .data-table tr {
      background: var(--bg-primary);
      transition: background 0.15s;
    }

    .data-table tr:nth-child(even) {
      background: var(--bg-secondary);
    }

    .data-table tr:hover {
      background: var(--bg-hover);
    }

    .data-table tr.selected {
      background: var(--amber-glow) !important;
    }

    .data-table tr {
      cursor: pointer;
    }

    .county-name {
      font-weight: 500;
      color: var(--text-primary);
    }

    .county-seat {
      color: var(--text-secondary);
    }

    .county-region {
      color: var(--cyan-primary);
    }

    .county-pop {
      color: var(--green-primary);
      font-variant-numeric: tabular-nums;
    }

    .county-website {
      color: var(--text-muted);
      font-size: 11px;
    }

    /* Right Panel - Details & BCME Modules */
    .right-panel {
      width: 420px;
      background: var(--bg-secondary);
      border-left: 1px solid var(--border-primary);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .detail-placeholder {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      padding: 40px;
      text-align: center;
    }

    .detail-placeholder svg {
      width: 48px;
      height: 48px;
      margin-bottom: 16px;
      opacity: 0.3;
    }

    .detail-placeholder-text {
      font-size: 13px;
    }

    .detail-content {
      display: none;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    .detail-content.visible {
      display: flex;
    }

    .detail-header {
      padding: 16px;
      border-bottom: 1px solid var(--border-primary);
      background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
    }

    .detail-county-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--amber-primary);
      margin-bottom: 4px;
    }

    .detail-county-subtitle {
      font-size: 11px;
      color: var(--text-muted);
    }

    .detail-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 16px;
      border-bottom: 1px solid var(--border-primary);
    }

    .detail-stat {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      padding: 12px;
    }

    .detail-stat-label {
      font-size: 9px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    .detail-stat-value {
      font-size: 14px;
      font-weight: 600;
    }

    .detail-stat-value.amber { color: var(--amber-primary); }
    .detail-stat-value.green { color: var(--green-primary); }
    .detail-stat-value.cyan { color: var(--cyan-primary); }
    .detail-stat-value.purple { color: var(--purple-primary); }

    .detail-website {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border-primary);
    }

    .detail-website a {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--cyan-primary);
      text-decoration: none;
      font-size: 12px;
      transition: color 0.2s;
    }

    .detail-website a:hover {
      color: var(--amber-primary);
    }

    .detail-website svg {
      width: 14px;
      height: 14px;
    }

    /* BCME Module Tabs */
    .bcme-tabs {
      display: flex;
      border-bottom: 1px solid var(--border-primary);
      background: var(--bg-tertiary);
      overflow-x: auto;
    }

    .bcme-tab {
      padding: 10px 14px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .bcme-tab:hover {
      color: var(--text-primary);
      background: var(--bg-hover);
    }

    .bcme-tab.active {
      color: var(--amber-primary);
      border-bottom-color: var(--amber-primary);
      background: var(--bg-secondary);
    }

    .bcme-tab svg {
      width: 12px;
      height: 12px;
    }

    .bcme-tab-count {
      background: var(--bg-hover);
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 9px;
    }

    .bcme-tab.active .bcme-tab-count {
      background: var(--amber-glow);
      color: var(--amber-primary);
    }

    /* BCME Module Content */
    .bcme-content {
      flex: 1;
      overflow-y: auto;
      padding: 0;
    }

    .bcme-module {
      display: none;
      padding: 12px;
    }

    .bcme-module.active {
      display: block;
    }

    .bcme-section {
      margin-bottom: 16px;
    }

    .bcme-section-header {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      padding: 8px 0;
      border-bottom: 1px solid var(--border-primary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .bcme-card {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 8px;
      transition: all 0.2s;
    }

    .bcme-card:hover {
      border-color: var(--border-highlight);
    }

    .bcme-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .bcme-card-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .bcme-card-badge {
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 3px;
      text-transform: uppercase;
    }

    .bcme-card-badge.active {
      background: rgba(34, 197, 94, 0.15);
      color: var(--green-primary);
      border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .bcme-card-badge.expired {
      background: rgba(239, 68, 68, 0.15);
      color: var(--red-primary);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .bcme-card-badge.pending {
      background: rgba(245, 158, 11, 0.15);
      color: var(--amber-primary);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .bcme-card-badge.warning {
      background: rgba(236, 72, 153, 0.15);
      color: var(--pink-primary);
      border: 1px solid rgba(236, 72, 153, 0.3);
    }

    .bcme-card-row {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      margin-bottom: 4px;
    }

    .bcme-card-label {
      color: var(--text-muted);
    }

    .bcme-card-value {
      color: var(--text-secondary);
    }

    .bcme-card-value.highlight {
      color: var(--cyan-primary);
      font-weight: 500;
    }

    .bcme-card-value.money {
      color: var(--green-primary);
      font-weight: 500;
    }

    .bcme-card-value.alert {
      color: var(--red-primary);
      font-weight: 500;
    }

    .bcme-alert {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 6px;
      padding: 10px 12px;
      margin-bottom: 12px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .bcme-alert svg {
      width: 16px;
      height: 16px;
      color: var(--red-primary);
      flex-shrink: 0;
      margin-top: 1px;
    }

    .bcme-alert-content {
      flex: 1;
    }

    .bcme-alert-title {
      font-size: 11px;
      font-weight: 600;
      color: var(--red-primary);
      margin-bottom: 2px;
    }

    .bcme-alert-text {
      font-size: 10px;
      color: var(--text-secondary);
    }

    .bcme-empty {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-muted);
    }

    .bcme-empty svg {
      width: 32px;
      height: 32px;
      margin-bottom: 12px;
      opacity: 0.3;
    }

    .bcme-empty-text {
      font-size: 12px;
      margin-bottom: 4px;
    }

    .bcme-empty-subtext {
      font-size: 10px;
    }

    /* Meeting/Agenda Items */
    .meeting-item {
      border-left: 3px solid var(--border-primary);
      padding-left: 12px;
      margin-bottom: 12px;
    }

    .meeting-item.recent {
      border-left-color: var(--green-primary);
    }

    .meeting-date {
      font-size: 10px;
      color: var(--amber-primary);
      margin-bottom: 4px;
    }

    .meeting-title {
      font-size: 12px;
      color: var(--text-primary);
      margin-bottom: 6px;
    }

    .agenda-items {
      font-size: 11px;
      color: var(--text-secondary);
    }

    .agenda-item {
      padding: 4px 0;
      display: flex;
      gap: 8px;
    }

    .agenda-item::before {
      content: '›';
      color: var(--text-muted);
    }

    /* Property Chain */
    .property-chain {
      position: relative;
    }

    .chain-item {
      position: relative;
      padding-left: 20px;
      padding-bottom: 16px;
    }

    .chain-item::before {
      content: '';
      position: absolute;
      left: 6px;
      top: 8px;
      bottom: 0;
      width: 2px;
      background: var(--border-primary);
    }

    .chain-item:last-child::before {
      display: none;
    }

    .chain-dot {
      position: absolute;
      left: 0;
      top: 4px;
      width: 14px;
      height: 14px;
      background: var(--bg-tertiary);
      border: 2px solid var(--cyan-primary);
      border-radius: 50%;
    }

    .chain-item:first-child .chain-dot {
      background: var(--cyan-primary);
    }

    .chain-year {
      font-size: 10px;
      color: var(--amber-primary);
      margin-bottom: 2px;
    }

    .chain-owner {
      font-size: 12px;
      color: var(--text-primary);
    }

    .chain-details {
      font-size: 10px;
      color: var(--text-muted);
    }

    /* Energy Icons */
    .energy-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      border-radius: 4px;
      margin-right: 8px;
    }

    .energy-icon.datacenter {
      background: rgba(168, 85, 247, 0.15);
      color: var(--purple-primary);
    }

    .energy-icon.solar {
      background: rgba(245, 158, 11, 0.15);
      color: var(--amber-primary);
    }

    .energy-icon.wind {
      background: rgba(6, 182, 212, 0.15);
      color: var(--cyan-primary);
    }

    .energy-icon.transmission {
      background: rgba(239, 68, 68, 0.15);
      color: var(--red-primary);
    }

    .energy-icon svg {
      width: 14px;
      height: 14px;
    }

    /* Footer */
    .footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-primary);
      padding: 8px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: var(--text-muted);
    }

    .footer-left, .footer-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .status {
      color: var(--green-primary);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-primary);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--border-highlight);
    }
  </style>
</head>
<body>
  <div class="scanlines"></div>

  <!-- Header -->
  <header class="header">
    <div class="logo-section">
      <button class="menu-toggle" id="menuToggle" aria-label="Open navigation menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
          <polyline points="2 17 12 22 22 17"></polyline>
          <polyline points="2 12 12 17 22 12"></polyline>
        </svg>
        <div>
          <div class="logo-text">MAICounty</div>
          <div class="logo-subtitle">Texas County Intelligence</div>
        </div>
      </div>
    </div>
    <div class="header-right">
      <div class="live-indicator">
        <span class="live-dot"></span>
        <span>LIVE</span>
      </div>
      <div class="timestamp" id="timestamp"></div>
    </div>
  </header>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-item">
      <span class="stat-label">Total Counties</span>
      <span class="stat-value amber">254</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">State Population</span>
      <span class="stat-value" id="totalPop">30,503,301</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Filtered</span>
      <span class="stat-value cyan" id="filteredCount">254</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Filtered Pop</span>
      <span class="stat-value green" id="filteredPop">30,503,301</span>
    </div>
    <div class="stat-divider"></div>
    <div class="stat-item">
      <span class="stat-label">Tax Abatements</span>
      <span class="stat-value purple" id="totalAbatements">47</span>
    </div>
    <div class="bcme-badge" onclick="window.location.href='hh-dashboard.html'">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
      </svg>
      <span>Go to BCMCE Platform →</span>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Swipe Handle -->
    <div class="swipe-handle" id="swipeHandle"></div>

    <!-- Left Panel - Collapsible Sidebar -->
    <div class="left-panel" id="leftPanel">
      <div class="sidebar-header">
        <div class="sidebar-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
          </svg>
          <span>Navigation</span>
        </div>
        <button class="sidebar-close" id="sidebarClose" aria-label="Close navigation">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="filter-section">
        <div class="filter-label">Search Counties</div>
        <div class="search-wrapper">
          <input type="text" class="search-input" id="searchInput" placeholder="County or seat name...">
          <button class="clear-btn" id="clearBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-label">Region Filter</div>
        <select class="region-select" id="regionSelect">
          <option value="All">All Regions</option>
        </select>
      </div>

      <div class="panel-header" style="border-top: 1px solid var(--border-primary);">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="2" y1="12" x2="22" y2="12"></line>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
        </svg>
        Regions
      </div>

      <div class="region-list" id="regionList"></div>
    </div>

    <!-- Center Panel - Data Table -->
    <div class="center-panel">
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th data-sort="name" class="sorted">County <span class="sort-icon">▲</span></th>
              <th data-sort="seat">Seat <span class="sort-icon">▲</span></th>
              <th data-sort="region">Region <span class="sort-icon">▲</span></th>
              <th data-sort="population">Population <span class="sort-icon">▲</span></th>
              <th data-sort="website">Website <span class="sort-icon">▲</span></th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Right Panel - Details & BCME -->
    <div class="right-panel">
      <div class="detail-placeholder" id="detailPlaceholder">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="3" y1="9" x2="21" y2="9"></line>
          <line x1="9" y1="21" x2="9" y2="9"></line>
        </svg>
        <div class="detail-placeholder-text">Select a county to view details and BCME data modules</div>
      </div>

      <div class="detail-content" id="detailContent">
        <!-- Header -->
        <div class="detail-header">
          <div class="detail-county-name" id="detailName"></div>
          <div class="detail-county-subtitle" id="detailSubtitle"></div>
        </div>

        <!-- Quick Stats -->
        <div class="detail-stats">
          <div class="detail-stat">
            <div class="detail-stat-label">County Seat</div>
            <div class="detail-stat-value amber" id="detailSeat"></div>
          </div>
          <div class="detail-stat">
            <div class="detail-stat-label">Population</div>
            <div class="detail-stat-value green" id="detailPop"></div>
          </div>
          <div class="detail-stat">
            <div class="detail-stat-label">Region</div>
            <div class="detail-stat-value cyan" id="detailRegion"></div>
          </div>
          <div class="detail-stat">
            <div class="detail-stat-label">Tax Abatements</div>
            <div class="detail-stat-value purple" id="detailAbatements">0</div>
          </div>
        </div>

        <!-- Website Link -->
        <div class="detail-website">
          <a id="detailWebsite" href="#" target="_blank" rel="noopener noreferrer">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
              <polyline points="15 3 21 3 21 9"></polyline>
              <line x1="10" y1="14" x2="21" y2="3"></line>
            </svg>
            <span id="detailWebsiteText"></span>
          </a>
        </div>

        <!-- BCME Tabs -->
        <div class="bcme-tabs">
          <div class="bcme-tab active" data-module="abatements">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
            Tax Abate
            <span class="bcme-tab-count" id="abatementCount">0</span>
          </div>
          <div class="bcme-tab" data-module="court">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
            </svg>
            Court
            <span class="bcme-tab-count" id="courtCount">0</span>
          </div>
          <div class="bcme-tab" data-module="property">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            Property
          </div>
          <div class="bcme-tab" data-module="energy">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
            Energy
            <span class="bcme-tab-count" id="energyCount">0</span>
          </div>
          <div class="bcme-tab" data-module="cad">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            </svg>
            CAD
          </div>
        </div>

        <!-- BCME Content -->
        <div class="bcme-content">
          <!-- Tax Abatements Module -->
          <div class="bcme-module active" id="module-abatements">
            <div id="abatementsContent"></div>
          </div>

          <!-- Commissioners Court Module -->
          <div class="bcme-module" id="module-court">
            <div id="courtContent"></div>
          </div>

          <!-- Property Records Module -->
          <div class="bcme-module" id="module-property">
            <div id="propertyContent"></div>
          </div>

          <!-- Energy Infrastructure Module -->
          <div class="bcme-module" id="module-energy">
            <div id="energyContent"></div>
          </div>

          <!-- CAD Data Module -->
          <div class="bcme-module" id="module-cad">
            <div id="cadContent"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-left">
      <span>MAICounty v2.0</span>
      <span>|</span>
      <span>Bevans Real Estate Intelligence</span>
      <span>|</span>
      <span>BCME Integrated</span>
    </div>
    <div class="footer-right">
      <span class="status">● Systems Nominal</span>
      <span>|</span>
      <span>254 Counties Indexed</span>
      <span>|</span>
      <span>47 Active Abatements</span>
    </div>
  </footer>

  <script>
    // Texas Counties Database (254 counties)
    const texasCounties = [
      { name: "Anderson", seat: "Palestine", website: "https://www.co.anderson.tx.us", population: 57922, region: "East Texas" },
      { name: "Andrews", seat: "Andrews", website: "https://www.co.andrews.tx.us", population: 18610, region: "West Texas" },
      { name: "Angelina", seat: "Lufkin", website: "https://www.angelinacounty.net", population: 86395, region: "East Texas" },
      { name: "Aransas", seat: "Rockport", website: "https://www.aransascounty.org", population: 23830, region: "Gulf Coast" },
      { name: "Archer", seat: "Archer City", website: "https://www.co.archer.tx.us", population: 8560, region: "North Texas" },
      { name: "Armstrong", seat: "Claude", website: "https://www.co.armstrong.tx.us", population: 1848, region: "Panhandle" },
      { name: "Atascosa", seat: "Jourdanton", website: "https://www.atascosacounty.texas.gov", population: 48981, region: "South Texas" },
      { name: "Austin", seat: "Bellville", website: "https://www.austincounty.com", population: 30167, region: "Southeast Texas" },
      { name: "Bailey", seat: "Muleshoe", website: "https://www.co.bailey.tx.us", population: 6904, region: "Panhandle" },
      { name: "Bandera", seat: "Bandera", website: "https://www.banderacounty.org", population: 22169, region: "Hill Country" },
      { name: "Bastrop", seat: "Bastrop", website: "https://www.co.bastrop.tx.us", population: 97216, region: "Central Texas" },
      { name: "Baylor", seat: "Seymour", website: "https://www.co.baylor.tx.us", population: 3465, region: "North Texas" },
      { name: "Bee", seat: "Beeville", website: "https://www.co.bee.tx.us", population: 31047, region: "South Texas" },
      { name: "Bell", seat: "Belton", website: "https://www.bellcounty.gov", population: 370647, region: "Central Texas" },
      { name: "Bexar", seat: "San Antonio", website: "https://www.bexar.org", population: 2009324, region: "South Texas" },
      { name: "Blanco", seat: "Johnson City", website: "https://www.co.blanco.tx.us", population: 11374, region: "Hill Country" },
      { name: "Borden", seat: "Gail", website: "https://www.co.borden.tx.us", population: 631, region: "West Texas" },
      { name: "Bosque", seat: "Meridian", website: "http://107.143.183.49", population: 18235, region: "Central Texas" },
      { name: "Bowie", seat: "New Boston", website: "https://www.co.bowie.tx.us", population: 92893, region: "Northeast Texas" },
      { name: "Brazoria", seat: "Angleton", website: "https://www.brazoria-county.com", population: 372031, region: "Gulf Coast" },
      { name: "Brazos", seat: "Bryan", website: "https://www.brazoscountytx.gov", population: 233849, region: "Central Texas" },
      { name: "Brewster", seat: "Alpine", website: "https://www.brewstercountytx.com", population: 9546, region: "West Texas" },
      { name: "Briscoe", seat: "Silverton", website: "https://www.co.briscoe.tx.us", population: 1435, region: "Panhandle" },
      { name: "Brooks", seat: "Falfurrias", website: "https://www.co.brooks.tx.us", population: 7076, region: "South Texas" },
      { name: "Brown", seat: "Brownwood", website: "https://www.browncounty.org", population: 37749, region: "Central Texas" },
      { name: "Burleson", seat: "Caldwell", website: "https://www.burlesoncounty.org", population: 17642, region: "Central Texas" },
      { name: "Burnet", seat: "Burnet", website: "https://www.burnetcountytexas.org", population: 49130, region: "Hill Country" },
      { name: "Caldwell", seat: "Lockhart", website: "https://www.co.caldwell.tx.us", population: 45883, region: "Central Texas" },
      { name: "Calhoun", seat: "Port Lavaca", website: "https://www.calhouncotx.org", population: 20106, region: "Gulf Coast" },
      { name: "Callahan", seat: "Baird", website: "https://www.co.callahan.tx.us", population: 13708, region: "West Texas" },
      { name: "Cameron", seat: "Brownsville", website: "https://www.co.cameron.tx.us", population: 421017, region: "Rio Grande Valley" },
      { name: "Camp", seat: "Pittsburg", website: "https://www.co.camp.tx.us", population: 12464, region: "Northeast Texas" },
      { name: "Carson", seat: "Panhandle", website: "https://www.co.carson.tx.us", population: 5807, region: "Panhandle" },
      { name: "Cass", seat: "Linden", website: "https://www.co.cass.tx.us", population: 28454, region: "Northeast Texas" },
      { name: "Castro", seat: "Dimmitt", website: "https://www.co.castro.tx.us", population: 7371, region: "Panhandle" },
      { name: "Chambers", seat: "Anahuac", website: "https://www.co.chambers.tx.us", population: 46571, region: "Gulf Coast" },
      { name: "Cherokee", seat: "Rusk", website: "https://www.cherokeecounty-tx.gov", population: 50412, region: "East Texas" },
      { name: "Childress", seat: "Childress", website: "https://www.co.childress.tx.us", population: 6664, region: "Panhandle" },
      { name: "Clay", seat: "Henrietta", website: "https://www.co.clay.tx.us", population: 10218, region: "North Texas" },
      { name: "Cochran", seat: "Morton", website: "https://www.co.cochran.tx.us", population: 2547, region: "West Texas" },
      { name: "Coke", seat: "Robert Lee", website: "https://www.co.coke.tx.us", population: 3285, region: "West Texas" },
      { name: "Coleman", seat: "Coleman", website: "https://www.co.coleman.tx.us", population: 7926, region: "West Texas" },
      { name: "Collin", seat: "McKinney", website: "https://www.collincountytx.gov", population: 1064465, region: "North Texas" },
      { name: "Collingsworth", seat: "Wellington", website: "https://www.co.collingsworth.tx.us", population: 2652, region: "Panhandle" },
      { name: "Colorado", seat: "Columbus", website: "https://www.co.colorado.tx.us", population: 20557, region: "Southeast Texas" },
      { name: "Comal", seat: "New Braunfels", website: "https://www.comal.gov", population: 161501, region: "Hill Country" },
      { name: "Comanche", seat: "Comanche", website: "https://www.co.comanche.tx.us", population: 13594, region: "Central Texas" },
      { name: "Concho", seat: "Paint Rock", website: "https://www.co.concho.tx.us", population: 3303, region: "West Texas" },
      { name: "Cooke", seat: "Gainesville", website: "https://www.co.cooke.tx.us", population: 41668, region: "North Texas" },
      { name: "Coryell", seat: "Gatesville", website: "https://www.coryellcounty.org", population: 83093, region: "Central Texas" },
      { name: "Cottle", seat: "Paducah", website: "https://www.co.cottle.tx.us", population: 1380, region: "North Texas" },
      { name: "Crane", seat: "Crane", website: "https://www.co.crane.tx.us", population: 4675, region: "West Texas" },
      { name: "Crockett", seat: "Ozona", website: "https://www.co.crockett.tx.us", population: 3098, region: "West Texas" },
      { name: "Crosby", seat: "Crosbyton", website: "https://www.co.crosby.tx.us", population: 5133, region: "West Texas" },
      { name: "Culberson", seat: "Van Horn", website: "https://www.co.culberson.tx.us", population: 2188, region: "West Texas" },
      { name: "Dallam", seat: "Dalhart", website: "https://www.co.dallam.tx.us", population: 7115, region: "Panhandle" },
      { name: "Dallas", seat: "Dallas", website: "https://www.dallascounty.org", population: 2613539, region: "North Texas" },
      { name: "Dawson", seat: "Lamesa", website: "https://www.co.dawson.tx.us", population: 12456, region: "West Texas" },
      { name: "Deaf Smith", seat: "Hereford", website: "https://www.co.deaf-smith.tx.us", population: 18583, region: "Panhandle" },
      { name: "Delta", seat: "Cooper", website: "https://www.co.delta.tx.us", population: 5230, region: "Northeast Texas" },
      { name: "Denton", seat: "Denton", website: "https://www.dentoncounty.gov", population: 906422, region: "North Texas" },
      { name: "DeWitt", seat: "Cuero", website: "https://www.co.dewitt.tx.us", population: 19824, region: "South Texas" },
      { name: "Dickens", seat: "Dickens", website: "https://www.co.dickens.tx.us", population: 2171, region: "West Texas" },
      { name: "Dimmit", seat: "Carrizo Springs", website: "https://www.co.dimmit.tx.us", population: 8615, region: "South Texas" },
      { name: "Donley", seat: "Clarendon", website: "https://www.co.donley.tx.us", population: 3258, region: "Panhandle" },
      { name: "Duval", seat: "San Diego", website: "https://www.co.duval.tx.us", population: 9831, region: "South Texas" },
      { name: "Eastland", seat: "Eastland", website: "https://www.eastlandcounty.com", population: 17725, region: "West Texas" },
      { name: "Ector", seat: "Odessa", website: "https://www.co.ector.tx.us", population: 165171, region: "West Texas" },
      { name: "Edwards", seat: "Rocksprings", website: "https://www.co.edwards.tx.us", population: 1422, region: "West Texas" },
      { name: "Ellis", seat: "Waxahachie", website: "https://www.co.ellis.tx.us", population: 192455, region: "North Texas" },
      { name: "El Paso", seat: "El Paso", website: "https://www.epcounty.com", population: 865657, region: "West Texas" },
      { name: "Erath", seat: "Stephenville", website: "https://www.co.erath.tx.us", population: 42545, region: "North Texas" },
      { name: "Falls", seat: "Marlin", website: "https://www.co.falls.tx.us", population: 16968, region: "Central Texas" },
      { name: "Fannin", seat: "Bonham", website: "https://www.co.fannin.tx.us", population: 35662, region: "Northeast Texas" },
      { name: "Fayette", seat: "La Grange", website: "https://www.fayettecounty.texas.gov", population: 24435, region: "Central Texas" },
      { name: "Fisher", seat: "Roby", website: "https://www.co.fisher.tx.us", population: 3672, region: "West Texas" },
      { name: "Floyd", seat: "Floydada", website: "https://www.co.floyd.tx.us", population: 5402, region: "Panhandle" },
      { name: "Foard", seat: "Crowell", website: "https://www.co.foard.tx.us", population: 1095, region: "North Texas" },
      { name: "Fort Bend", seat: "Richmond", website: "https://www.fortbendcountytx.gov", population: 822779, region: "Gulf Coast" },
      { name: "Franklin", seat: "Mount Vernon", website: "https://www.co.franklin.tx.us", population: 10359, region: "Northeast Texas" },
      { name: "Freestone", seat: "Fairfield", website: "https://www.freestonecounty.org", population: 19435, region: "East Texas" },
      { name: "Frio", seat: "Pearsall", website: "https://www.co.frio.tx.us", population: 19136, region: "South Texas" },
      { name: "Gaines", seat: "Seminole", website: "https://www.co.gaines.tx.us", population: 21598, region: "West Texas" },
      { name: "Galveston", seat: "Galveston", website: "https://www.galvestoncountytx.gov", population: 350682, region: "Gulf Coast" },
      { name: "Garza", seat: "Post", website: "https://www.co.garza.tx.us", population: 5816, region: "West Texas" },
      { name: "Gillespie", seat: "Fredericksburg", website: "https://www.gillespiecounty.org", population: 26725, region: "Hill Country" },
      { name: "Glasscock", seat: "Garden City", website: "https://www.co.glasscock.tx.us", population: 1116, region: "West Texas" },
      { name: "Goliad", seat: "Goliad", website: "https://www.co.goliad.tx.us", population: 7012, region: "South Texas" },
      { name: "Gonzales", seat: "Gonzales", website: "https://www.gonzalescounty.state.tx.us", population: 19653, region: "South Texas" },
      { name: "Gray", seat: "Pampa", website: "https://www.co.gray.tx.us", population: 21227, region: "Panhandle" },
      { name: "Grayson", seat: "Sherman", website: "https://www.co.grayson.tx.us", population: 135543, region: "North Texas" },
      { name: "Gregg", seat: "Longview", website: "https://www.co.gregg.tx.us", population: 124239, region: "East Texas" },
      { name: "Grimes", seat: "Anderson", website: "https://www.co.grimes.tx.us", population: 29268, region: "East Texas" },
      { name: "Guadalupe", seat: "Seguin", website: "https://www.co.guadalupe.tx.us", population: 172706, region: "South Texas" },
      { name: "Hale", seat: "Plainview", website: "https://www.co.hale.tx.us", population: 32522, region: "Panhandle" },
      { name: "Hall", seat: "Memphis", website: "https://www.co.hall.tx.us", population: 2825, region: "Panhandle" },
      { name: "Hamilton", seat: "Hamilton", website: "https://www.co.hamilton.tx.us", population: 8222, region: "Central Texas" },
      { name: "Hansford", seat: "Spearman", website: "https://www.co.hansford.tx.us", population: 5285, region: "Panhandle" },
      { name: "Hardeman", seat: "Quanah", website: "https://www.co.hardeman.tx.us", population: 3549, region: "North Texas" },
      { name: "Hardin", seat: "Kountze", website: "https://www.co.hardin.tx.us", population: 56231, region: "Southeast Texas" },
      { name: "Harris", seat: "Houston", website: "https://www.harriscountytx.gov", population: 4731145, region: "Gulf Coast" },
      { name: "Harrison", seat: "Marshall", website: "https://www.harrisoncountytexas.org", population: 68839, region: "East Texas" },
      { name: "Hartley", seat: "Channing", website: "https://www.co.hartley.tx.us", population: 5382, region: "Panhandle" },
      { name: "Haskell", seat: "Haskell", website: "https://www.co.haskell.tx.us", population: 5416, region: "West Texas" },
      { name: "Hays", seat: "San Marcos", website: "https://www.hayscountytx.gov", population: 241067, region: "Hill Country" },
      { name: "Hemphill", seat: "Canadian", website: "https://www.co.hemphill.tx.us", population: 3382, region: "Panhandle" },
      { name: "Henderson", seat: "Athens", website: "https://www.co.henderson.tx.us", population: 82127, region: "East Texas" },
      { name: "Hidalgo", seat: "Edinburg", website: "https://www.hidalgocounty.us", population: 870781, region: "Rio Grande Valley" },
      { name: "Hill", seat: "Hillsboro", website: "https://www.co.hill.tx.us", population: 35874, region: "Central Texas" },
      { name: "Hockley", seat: "Levelland", website: "https://www.co.hockley.tx.us", population: 21537, region: "West Texas" },
      { name: "Hood", seat: "Granbury", website: "https://www.co.hood.tx.us", population: 61598, region: "North Texas" },
      { name: "Hopkins", seat: "Sulphur Springs", website: "https://www.hopkinscountytx.org", population: 37242, region: "Northeast Texas" },
      { name: "Houston", seat: "Crockett", website: "https://www.co.houston.tx.us", population: 22066, region: "East Texas" },
      { name: "Howard", seat: "Big Spring", website: "https://www.co.howard.tx.us", population: 34860, region: "West Texas" },
      { name: "Hudspeth", seat: "Sierra Blanca", website: "https://www.co.hudspeth.tx.us", population: 3202, region: "West Texas" },
      { name: "Hunt", seat: "Greenville", website: "https://www.huntcounty.net", population: 99956, region: "Northeast Texas" },
      { name: "Hutchinson", seat: "Stinnett", website: "https://www.co.hutchinson.tx.us", population: 20617, region: "Panhandle" },
      { name: "Irion", seat: "Mertzon", website: "https://www.co.irion.tx.us", population: 1513, region: "West Texas" },
      { name: "Jack", seat: "Jacksboro", website: "https://www.co.jack.tx.us", population: 8472, region: "North Texas" },
      { name: "Jackson", seat: "Edna", website: "https://www.co.jackson.tx.us", population: 14988, region: "Gulf Coast" },
      { name: "Jasper", seat: "Jasper", website: "https://www.co.jasper.tx.us", population: 32980, region: "Southeast Texas" },
      { name: "Jeff Davis", seat: "Fort Davis", website: "https://www.co.jeff-davis.tx.us", population: 1996, region: "West Texas" },
      { name: "Jefferson", seat: "Beaumont", website: "https://www.co.jefferson.tx.us", population: 256526, region: "Southeast Texas" },
      { name: "Jim Hogg", seat: "Hebbronville", website: "https://www.co.jim-hogg.tx.us", population: 4838, region: "South Texas" },
      { name: "Jim Wells", seat: "Alice", website: "https://www.co.jim-wells.tx.us", population: 38891, region: "South Texas" },
      { name: "Johnson", seat: "Cleburne", website: "https://www.johnsoncountytx.org", population: 179927, region: "North Texas" },
      { name: "Jones", seat: "Anson", website: "https://www.co.jones.tx.us", population: 19663, region: "West Texas" },
      { name: "Karnes", seat: "Karnes City", website: "https://www.co.karnes.tx.us", population: 15550, region: "South Texas" },
      { name: "Kaufman", seat: "Kaufman", website: "https://www.kaufmancounty.net", population: 145310, region: "North Texas" },
      { name: "Kendall", seat: "Boerne", website: "https://www.co.kendall.tx.us", population: 47093, region: "Hill Country" },
      { name: "Kenedy", seat: "Sarita", website: "https://www.co.kenedy.tx.us", population: 350, region: "South Texas" },
      { name: "Kent", seat: "Jayton", website: "https://www.co.kent.tx.us", population: 753, region: "West Texas" },
      { name: "Kerr", seat: "Kerrville", website: "https://www.kerrcounty.org", population: 52598, region: "Hill Country" },
      { name: "Kimble", seat: "Junction", website: "https://www.co.kimble.tx.us", population: 4286, region: "West Texas" },
      { name: "King", seat: "Guthrie", website: "https://www.co.king.tx.us", population: 265, region: "West Texas" },
      { name: "Kinney", seat: "Brackettville", website: "https://www.co.kinney.tx.us", population: 3129, region: "South Texas" },
      { name: "Kleberg", seat: "Kingsville", website: "https://www.co.kleberg.tx.us", population: 31040, region: "South Texas" },
      { name: "Knox", seat: "Benjamin", website: "https://www.co.knox.tx.us", population: 3729, region: "North Texas" },
      { name: "Lamar", seat: "Paris", website: "https://www.co.lamar.tx.us", population: 50088, region: "Northeast Texas" },
      { name: "Lamb", seat: "Littlefield", website: "https://www.co.lamb.tx.us", population: 13045, region: "Panhandle" },
      { name: "Lampasas", seat: "Lampasas", website: "https://www.co.lampasas.tx.us", population: 21627, region: "Central Texas" },
      { name: "La Salle", seat: "Cotulla", website: "https://www.co.la-salle.tx.us", population: 6664, region: "South Texas" },
      { name: "Lavaca", seat: "Hallettsville", website: "https://www.co.lavaca.tx.us", population: 20337, region: "South Texas" },
      { name: "Lee", seat: "Giddings", website: "https://www.co.lee.tx.us", population: 17478, region: "Central Texas" },
      { name: "Leon", seat: "Centerville", website: "https://www.co.leon.tx.us", population: 16801, region: "East Texas" },
      { name: "Liberty", seat: "Liberty", website: "https://www.co.liberty.tx.us", population: 91628, region: "Southeast Texas" },
      { name: "Limestone", seat: "Groesbeck", website: "https://www.co.limestone.tx.us", population: 22146, region: "Central Texas" },
      { name: "Lipscomb", seat: "Lipscomb", website: "https://www.co.lipscomb.tx.us", population: 3059, region: "Panhandle" },
      { name: "Live Oak", seat: "George West", website: "https://www.co.live-oak.tx.us", population: 11335, region: "South Texas" },
      { name: "Llano", seat: "Llano", website: "https://www.co.llano.tx.us", population: 21243, region: "Hill Country" },
      { name: "Loving", seat: "Mentone", website: "https://www.co.loving.tx.us", population: 64, region: "West Texas" },
      { name: "Lubbock", seat: "Lubbock", website: "https://www.co.lubbock.tx.us", population: 310639, region: "West Texas" },
      { name: "Lynn", seat: "Tahoka", website: "https://www.co.lynn.tx.us", population: 5596, region: "West Texas" },
      { name: "McCulloch", seat: "Brady", website: "https://www.co.mcculloch.tx.us", population: 7630, region: "West Texas" },
      { name: "McLennan", seat: "Waco", website: "https://www.co.mclennan.tx.us", population: 260579, region: "Central Texas" },
      { name: "McMullen", seat: "Tilden", website: "https://www.co.mcmullen.tx.us", population: 600, region: "South Texas" },
      { name: "Madison", seat: "Madisonville", website: "https://www.co.madison.tx.us", population: 14157, region: "East Texas" },
      { name: "Marion", seat: "Jefferson", website: "https://www.co.marion.tx.us", population: 9725, region: "Northeast Texas" },
      { name: "Martin", seat: "Stanton", website: "https://www.co.martin.tx.us", population: 5705, region: "West Texas" },
      { name: "Mason", seat: "Mason", website: "https://www.co.mason.tx.us", population: 3953, region: "Hill Country" },
      { name: "Matagorda", seat: "Bay City", website: "https://www.co.matagorda.tx.us", population: 36255, region: "Gulf Coast" },
      { name: "Maverick", seat: "Eagle Pass", website: "https://www.co.maverick.tx.us", population: 58722, region: "South Texas" },
      { name: "Medina", seat: "Hondo", website: "https://www.medinacountytx.org", population: 50748, region: "South Texas" },
      { name: "Menard", seat: "Menard", website: "https://www.co.menard.tx.us", population: 2236, region: "West Texas" },
      { name: "Midland", seat: "Midland", website: "https://www.co.midland.tx.us", population: 176832, region: "West Texas" },
      { name: "Milam", seat: "Cameron", website: "https://www.milamcounty.net", population: 24754, region: "Central Texas" },
      { name: "Mills", seat: "Goldthwaite", website: "https://www.co.mills.tx.us", population: 4456, region: "Central Texas" },
      { name: "Mitchell", seat: "Colorado City", website: "https://www.co.mitchell.tx.us", population: 8990, region: "West Texas" },
      { name: "Montague", seat: "Montague", website: "https://www.co.montague.tx.us", population: 19965, region: "North Texas" },
      { name: "Montgomery", seat: "Conroe", website: "https://www.mctx.org", population: 620443, region: "Gulf Coast" },
      { name: "Moore", seat: "Dumas", website: "https://www.co.moore.tx.us", population: 21358, region: "Panhandle" },
      { name: "Morris", seat: "Daingerfield", website: "https://www.co.morris.tx.us", population: 11973, region: "Northeast Texas" },
      { name: "Motley", seat: "Matador", website: "https://www.co.motley.tx.us", population: 1063, region: "Panhandle" },
      { name: "Nacogdoches", seat: "Nacogdoches", website: "https://www.co.nacogdoches.tx.us", population: 64653, region: "East Texas" },
      { name: "Navarro", seat: "Corsicana", website: "https://www.navarrocounty.org", population: 52624, region: "North Texas" },
      { name: "Newton", seat: "Newton", website: "https://www.co.newton.tx.us", population: 12217, region: "Southeast Texas" },
      { name: "Nolan", seat: "Sweetwater", website: "https://www.co.nolan.tx.us", population: 14738, region: "West Texas" },
      { name: "Nueces", seat: "Corpus Christi", website: "https://www.nuecesco.com", population: 353178, region: "Gulf Coast" },
      { name: "Ochiltree", seat: "Perryton", website: "https://www.co.ochiltree.tx.us", population: 9006, region: "Panhandle" },
      { name: "Oldham", seat: "Vega", website: "https://www.co.oldham.tx.us", population: 1758, region: "Panhandle" },
      { name: "Orange", seat: "Orange", website: "https://www.co.orange.tx.us", population: 84808, region: "Southeast Texas" },
      { name: "Palo Pinto", seat: "Palo Pinto", website: "https://www.co.palo-pinto.tx.us", population: 28409, region: "North Texas" },
      { name: "Panola", seat: "Carthage", website: "https://www.co.panola.tx.us", population: 22386, region: "East Texas" },
      { name: "Parker", seat: "Weatherford", website: "https://www.parkercountytx.com", population: 148222, region: "North Texas" },
      { name: "Parmer", seat: "Farwell", website: "https://www.co.parmer.tx.us", population: 9869, region: "Panhandle" },
      { name: "Pecos", seat: "Fort Stockton", website: "https://www.co.pecos.tx.us", population: 15193, region: "West Texas" },
      { name: "Polk", seat: "Livingston", website: "https://www.co.polk.tx.us", population: 50123, region: "Southeast Texas" },
      { name: "Potter", seat: "Amarillo", website: "https://www.co.potter.tx.us", population: 118525, region: "Panhandle" },
      { name: "Presidio", seat: "Marfa", website: "https://www.co.presidio.tx.us", population: 6131, region: "West Texas" },
      { name: "Rains", seat: "Emory", website: "https://www.co.rains.tx.us", population: 12164, region: "Northeast Texas" },
      { name: "Randall", seat: "Canyon", website: "https://www.randallcounty.org", population: 140753, region: "Panhandle" },
      { name: "Reagan", seat: "Big Lake", website: "https://www.co.reagan.tx.us", population: 3385, region: "West Texas" },
      { name: "Real", seat: "Leakey", website: "https://www.co.real.tx.us", population: 2758, region: "Hill Country" },
      { name: "Red River", seat: "Clarksville", website: "https://www.co.red-river.tx.us", population: 11105, region: "Northeast Texas" },
      { name: "Reeves", seat: "Pecos", website: "https://www.co.reeves.tx.us", population: 14748, region: "West Texas" },
      { name: "Refugio", seat: "Refugio", website: "https://www.co.refugio.tx.us", population: 6741, region: "Gulf Coast" },
      { name: "Roberts", seat: "Miami", website: "https://www.co.roberts.tx.us", population: 827, region: "Panhandle" },
      { name: "Robertson", seat: "Franklin", website: "https://www.robertsoncountytx.org", population: 17767, region: "Central Texas" },
      { name: "Rockwall", seat: "Rockwall", website: "https://www.rockwallcountytexas.com", population: 107819, region: "North Texas" },
      { name: "Runnels", seat: "Ballinger", website: "https://www.co.runnels.tx.us", population: 9900, region: "West Texas" },
      { name: "Rusk", seat: "Henderson", website: "https://www.co.rusk.tx.us", population: 52715, region: "East Texas" },
      { name: "Sabine", seat: "Hemphill", website: "https://www.co.sabine.tx.us", population: 9894, region: "East Texas" },
      { name: "San Augustine", seat: "San Augustine", website: "https://www.co.san-augustine.tx.us", population: 7918, region: "East Texas" },
      { name: "San Jacinto", seat: "Coldspring", website: "https://www.co.san-jacinto.tx.us", population: 27402, region: "Southeast Texas" },
      { name: "San Patricio", seat: "Sinton", website: "https://www.co.san-patricio.tx.us", population: 68755, region: "Gulf Coast" },
      { name: "San Saba", seat: "San Saba", website: "https://www.co.san-saba.tx.us", population: 5730, region: "Central Texas" },
      { name: "Schleicher", seat: "Eldorado", website: "https://www.co.schleicher.tx.us", population: 2451, region: "West Texas" },
      { name: "Scurry", seat: "Snyder", website: "https://www.co.scurry.tx.us", population: 16932, region: "West Texas" },
      { name: "Shackelford", seat: "Albany", website: "https://www.co.shackelford.tx.us", population: 3105, region: "West Texas" },
      { name: "Shelby", seat: "Center", website: "https://www.co.shelby.tx.us", population: 24022, region: "East Texas" },
      { name: "Sherman", seat: "Stratford", website: "https://www.co.sherman.tx.us", population: 2782, region: "Panhandle" },
      { name: "Smith", seat: "Tyler", website: "https://www.smith-county.com", population: 233479, region: "East Texas" },
      { name: "Somervell", seat: "Glen Rose", website: "https://www.co.somervell.tx.us", population: 9205, region: "North Texas" },
      { name: "Starr", seat: "Rio Grande City", website: "https://www.starrcounty.us", population: 65920, region: "Rio Grande Valley" },
      { name: "Stephens", seat: "Breckenridge", website: "https://www.co.stephens.tx.us", population: 9101, region: "North Texas" },
      { name: "Sterling", seat: "Sterling City", website: "https://www.co.sterling.tx.us", population: 1372, region: "West Texas" },
      { name: "Stonewall", seat: "Aspermont", website: "https://www.co.stonewall.tx.us", population: 1245, region: "West Texas" },
      { name: "Sutton", seat: "Sonora", website: "https://www.co.sutton.tx.us", population: 3718, region: "West Texas" },
      { name: "Swisher", seat: "Tulia", website: "https://www.co.swisher.tx.us", population: 6971, region: "Panhandle" },
      { name: "Tarrant", seat: "Fort Worth", website: "https://www.tarrantcounty.com", population: 2110640, region: "North Texas" },
      { name: "Taylor", seat: "Abilene", website: "https://www.taylorcountytexas.org", population: 143208, region: "West Texas" },
      { name: "Terrell", seat: "Sanderson", website: "https://www.co.terrell.tx.us", population: 760, region: "West Texas" },
      { name: "Terry", seat: "Brownfield", website: "https://www.co.terry.tx.us", population: 11831, region: "West Texas" },
      { name: "Throckmorton", seat: "Throckmorton", website: "https://www.co.throckmorton.tx.us", population: 1440, region: "North Texas" },
      { name: "Titus", seat: "Mount Pleasant", website: "https://www.co.titus.tx.us", population: 31247, region: "Northeast Texas" },
      { name: "Tom Green", seat: "San Angelo", website: "https://www.tomgreencountytx.gov", population: 120003, region: "West Texas" },
      { name: "Travis", seat: "Austin", website: "https://www.traviscountytx.gov", population: 1290188, region: "Central Texas" },
      { name: "Trinity", seat: "Groveton", website: "https://www.co.trinity.tx.us", population: 13602, region: "East Texas" },
      { name: "Tyler", seat: "Woodville", website: "https://www.co.tyler.tx.us", population: 19798, region: "Southeast Texas" },
      { name: "Upshur", seat: "Gilmer", website: "https://www.countyofupshur.com", population: 41753, region: "Northeast Texas" },
      { name: "Upton", seat: "Rankin", website: "https://www.co.upton.tx.us", population: 3308, region: "West Texas" },
      { name: "Uvalde", seat: "Uvalde", website: "https://www.uvaldecounty.com", population: 24564, region: "South Texas" },
      { name: "Val Verde", seat: "Del Rio", website: "https://www.valverdecounty.texas.gov", population: 47586, region: "South Texas" },
      { name: "Van Zandt", seat: "Canton", website: "https://www.vanzandtcounty.org", population: 59541, region: "Northeast Texas" },
      { name: "Victoria", seat: "Victoria", website: "https://www.vctx.org", population: 91319, region: "Gulf Coast" },
      { name: "Walker", seat: "Huntsville", website: "https://www.co.walker.tx.us", population: 76400, region: "East Texas" },
      { name: "Waller", seat: "Hempstead", website: "https://www.wallercounty.us", population: 56794, region: "Gulf Coast" },
      { name: "Ward", seat: "Monahans", website: "https://www.co.ward.tx.us", population: 11644, region: "West Texas" },
      { name: "Washington", seat: "Brenham", website: "https://www.co.washington.tx.us", population: 35805, region: "Central Texas" },
      { name: "Webb", seat: "Laredo", website: "https://www.webbcountytx.gov", population: 267114, region: "South Texas" },
      { name: "Wharton", seat: "Wharton", website: "https://www.co.wharton.tx.us", population: 41570, region: "Gulf Coast" },
      { name: "Wheeler", seat: "Wheeler", website: "https://www.co.wheeler.tx.us", population: 4990, region: "Panhandle" },
      { name: "Wichita", seat: "Wichita Falls", website: "https://www.co.wichita.tx.us", population: 128696, region: "North Texas" },
      { name: "Wilbarger", seat: "Vernon", website: "https://www.wilbargercounty.com", population: 12887, region: "North Texas" },
      { name: "Willacy", seat: "Raymondville", website: "https://www.co.willacy.tx.us", population: 20164, region: "Rio Grande Valley" },
      { name: "Williamson", seat: "Georgetown", website: "https://www.wilco.org", population: 648951, region: "Central Texas" },
      { name: "Wilson", seat: "Floresville", website: "https://www.wilsoncountytx.gov", population: 49235, region: "South Texas" },
      { name: "Winkler", seat: "Kermit", website: "https://www.co.winkler.tx.us", population: 7791, region: "West Texas" },
      { name: "Wise", seat: "Decatur", website: "https://www.co.wise.tx.us", population: 68632, region: "North Texas" },
      { name: "Wood", seat: "Quitman", website: "https://www.mywoodcounty.com", population: 44843, region: "Northeast Texas" },
      { name: "Yoakum", seat: "Plains", website: "https://www.co.yoakum.tx.us", population: 7694, region: "West Texas" },
      { name: "Young", seat: "Graham", website: "https://www.youngtx.com", population: 17867, region: "North Texas" },
      { name: "Zapata", seat: "Zapata", website: "https://www.zapatacounty.org", population: 13889, region: "South Texas" },
      { name: "Zavala", seat: "Crystal City", website: "https://www.co.zavala.tx.us", population: 9670, region: "South Texas" }
    ];

    // BCME Data Modules for Bosque County MVP
    const bcmeData = {
      taxAbatements: {
        "Bosque": [
          {
            company: "CyrusOne LLC",
            type: "Chapter 312",
            facility: "Data Center Campus - Phase 1",
            appraised: 1200000000,
            abatement: 85,
            startYear: 2023,
            endYear: 2033,
            status: "active",
            jobs: 35,
            jobsActual: 12,
            annualReport: false,
            alerts: ["Missing 2024 annual report", "Job creation 66% below target"]
          },
          {
            company: "Bosque Solar LLC",
            type: "Chapter 313",
            facility: "150MW Solar Farm",
            appraised: 45000000,
            abatement: 100,
            startYear: 2022,
            endYear: 2032,
            status: "active",
            jobs: 5,
            jobsActual: 3,
            annualReport: true,
            alerts: ["Job creation 40% below target"]
          }
        ]
      },
      commissionersCourt: {
        "Bosque": [
          { date: "2026-01-20", type: "Regular", agenda: "Budget amendments, Road maintenance bids, CyrusOne tax agreement review" },
          { date: "2026-01-06", type: "Regular", agenda: "County facility improvements, Personnel changes, Bosque Solar compliance report" },
          { date: "2025-12-16", type: "Special", agenda: "Emergency road repairs CR-1720, Winter weather preparation" },
          { date: "2025-12-02", type: "Regular", agenda: "Annual budget review, Tax abatement performance reports, IT infrastructure" }
        ]
      },
      energyInfrastructure: {
        "Bosque": [
          { name: "CyrusOne Data Center", type: "Data Center", capacity: "200MW", status: "Operational", year: 2023 },
          { name: "Bosque Solar Farm", type: "Solar", capacity: "150MW", status: "Operational", year: 2022 },
          { name: "Meridian Wind Project", type: "Wind", capacity: "50MW", status: "Proposed", year: 2027 }
        ]
      },
      cadData: {
        "Bosque": {
          cadName: "Bosque Central Appraisal District",
          website: "https://bosque.tfaconnect.com",
          totalParcels: 12847,
          totalValue: 2450000000,
          exemptions: 340000000,
          taxableValue: 2110000000
        }
      },
      propertyRecords: {
        "Bosque": {
          sample: {
            parcel: "R123456",
            owner: "CyrusOne LLC",
            acres: 450,
            chain: [
              { year: 2023, owner: "CyrusOne LLC", price: 15000000 },
              { year: 2021, owner: "Meridian Ranch LLC", price: 4500000 },
              { year: 2015, owner: "Smith Family Trust", price: 2100000 }
            ]
          }
        }
      }
    };

    let currentCounty = null;
    let currentModule = 'abatements';
    let filteredCounties = [...texasCounties];

    // Initialize on load
    window.addEventListener('DOMContentLoaded', function() {
      updateTimestamp();
      setInterval(updateTimestamp, 1000);
      init();
    });

    function init() {
      renderRegions();
      renderTable();
      selectCounty('Bosque');
      setupEventListeners();
    }

    function updateTimestamp() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      document.getElementById('timestamp').textContent = timeStr + ' ' + dateStr;
    }

    function renderRegions() {
      const regions = [...new Set(texasCounties.map(c => c.region))].sort();
      const regionSelect = document.getElementById('regionSelect');
      regionSelect.innerHTML = '<option value="All">All Regions</option>' +
        regions.map(r => '<option value="' + r + '">' + r + '</option>').join('');

      const regionList = document.getElementById('regionList');
      regionList.innerHTML = regions.map(region => {
        const count = texasCounties.filter(c => c.region === region).length;
        return '<div class="region-item" onclick="filterByRegion(\'' + region + '\')">' +
          '<span class="region-name">' + region + '</span>' +
          '<span class="region-count"><span>' + count + '</span></span>' +
          '</div>';
      }).join('');
    }

    function renderTable() {
      const tbody = document.getElementById('tableBody');
      tbody.innerHTML = filteredCounties.map(county =>
        '<tr onclick="selectCounty(\'' + county.name + '\')" class="' + (currentCounty && currentCounty.name === county.name ? 'selected' : '') + '">' +
          '<td><span class="county-name">' + county.name + '</span></td>' +
          '<td><span class="county-seat">' + county.seat + '</span></td>' +
          '<td><span class="county-region">' + county.region + '</span></td>' +
          '<td><span class="county-pop">' + county.population.toLocaleString() + '</span></td>' +
          '<td><span class="county-website">' + county.website + '</span></td>' +
        '</tr>'
      ).join('');
      updateFilteredStats();
    }

    function updateFilteredStats() {
      document.getElementById('filteredCount').textContent = filteredCounties.length;
      const totalPop = filteredCounties.reduce((sum, c) => sum + c.population, 0);
      document.getElementById('filteredPop').textContent = totalPop.toLocaleString();
    }

    function selectCounty(name) {
      currentCounty = texasCounties.find(c => c.name === name);
      if (!currentCounty) return;

      document.getElementById('detailPlaceholder').style.display = 'none';
      document.getElementById('detailContent').classList.add('visible');

      document.getElementById('detailName').textContent = currentCounty.name + ' County';
      document.getElementById('detailSubtitle').textContent = 'County Seat: ' + currentCounty.seat;
      document.getElementById('detailSeat').textContent = currentCounty.seat;
      document.getElementById('detailPop').textContent = currentCounty.population.toLocaleString();
      document.getElementById('detailRegion').textContent = currentCounty.region;

      const abatementCount = (bcmeData.taxAbatements[currentCounty.name] || []).length;
      document.getElementById('detailAbatements').textContent = abatementCount;

      const websiteLink = document.getElementById('detailWebsite');
      websiteLink.href = currentCounty.website;
      document.getElementById('detailWebsiteText').textContent = currentCounty.website;

      renderTable();
      renderCurrentModule();
    }

    function switchModule(module) {
      currentModule = module;
      document.querySelectorAll('.bcme-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.closest('.bcme-tab').classList.add('active');

      document.querySelectorAll('.bcme-module').forEach(mod => {
        mod.classList.remove('active');
      });
      document.getElementById('module-' + module).classList.add('active');

      renderCurrentModule();
    }

    function renderCurrentModule() {
      if (!currentCounty) return;

      switch(currentModule) {
        case 'abatements':
          renderAbatementsModule();
          break;
        case 'court':
          renderCourtModule();
          break;
        case 'property':
          renderPropertyModule();
          break;
        case 'energy':
          renderEnergyModule();
          break;
        case 'cad':
          renderCadModule();
          break;
      }
    }

    function renderAbatementsModule() {
      const content = document.getElementById('abatementsContent');
      const abatements = bcmeData.taxAbatements[currentCounty.name] || [];

      document.getElementById('abatementCount').textContent = abatements.length;

      if (abatements.length === 0) {
        content.innerHTML = '<div class="bcme-empty">' +
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>' +
          '<div class="bcme-empty-text">No Tax Abatement Data</div>' +
          '<div class="bcme-empty-subtext">This county has no recorded tax abatements</div>' +
          '</div>';
        return;
      }

      content.innerHTML = abatements.map(a => {
        const alertsHTML = a.alerts && a.alerts.length > 0 ?
          '<div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-primary);">' +
          a.alerts.map(alert =>
            '<div class="bcme-alert">' +
              '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>' +
              '<div class="bcme-alert-content">' +
                '<div class="bcme-alert-title">Compliance Alert</div>' +
                '<div class="bcme-alert-text">' + alert + '</div>' +
              '</div>' +
            '</div>'
          ).join('') +
          '</div>' : '';

        return '<div class="bcme-card">' +
          '<div class="bcme-card-header">' +
            '<div class="bcme-card-title">' + a.company + '</div>' +
            '<div class="bcme-card-badge ' + a.status + '">' + a.status.toUpperCase() + '</div>' +
          '</div>' +
          '<div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">' + a.facility + '</div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Type:</span><span class="bcme-card-value">' + a.type + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Appraised Value:</span><span class="bcme-card-value money">$' + (a.appraised / 1000000).toFixed(1) + 'M</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Abatement:</span><span class="bcme-card-value highlight">' + a.abatement + '%</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Term:</span><span class="bcme-card-value">' + a.startYear + ' - ' + a.endYear + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Jobs Target/Actual:</span><span class="bcme-card-value ' + (a.jobsActual < a.jobs ? 'alert' : '') + '">' + a.jobs + ' / ' + a.jobsActual + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Annual Report:</span><span class="bcme-card-value ' + (a.annualReport ? '' : 'alert') + '">' + (a.annualReport ? '✓ Filed' : '✗ Missing') + '</span></div>' +
          alertsHTML +
        '</div>';
      }).join('');
    }

    function renderCourtModule() {
      const content = document.getElementById('courtContent');
      const meetings = bcmeData.commissionersCourt[currentCounty.name] || [];

      document.getElementById('courtCount').textContent = meetings.length;

      if (meetings.length === 0) {
        content.innerHTML = '<div class="bcme-empty">' +
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>' +
          '<div class="bcme-empty-text">No Court Records</div>' +
          '<div class="bcme-empty-subtext">No commissioners court data available</div>' +
          '</div>';
        return;
      }

      content.innerHTML = meetings.map((m, i) =>
        '<div class="meeting-item ' + (i === 0 ? 'recent' : '') + '">' +
          '<div class="meeting-date">' + m.date + '</div>' +
          '<div class="meeting-title">' + m.type + ' Meeting</div>' +
          '<div class="agenda-items">' + m.agenda + '</div>' +
        '</div>'
      ).join('');
    }

    function renderPropertyModule() {
      const content = document.getElementById('propertyContent');
      const property = bcmeData.propertyRecords[currentCounty.name];

      if (!property) {
        content.innerHTML = '<div class="bcme-empty">' +
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>' +
          '<div class="bcme-empty-text">No Property Records</div>' +
          '<div class="bcme-empty-subtext">No property ownership data available</div>' +
          '</div>';
        return;
      }

      content.innerHTML = '<div class="bcme-section">' +
        '<div class="bcme-section-header">Sample Property Chain - Parcel ' + property.sample.parcel + '</div>' +
        '<div class="bcme-card">' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Current Owner:</span><span class="bcme-card-value">' + property.sample.owner + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Total Acres:</span><span class="bcme-card-value highlight">' + property.sample.acres + '</span></div>' +
        '</div>' +
        '<div style="margin-top: 16px;">' +
          '<div class="bcme-section-header">Ownership Chain</div>' +
          '<div class="property-chain">' +
            property.sample.chain.map((entry, i) =>
              '<div class="chain-item">' +
                '<div class="chain-dot"></div>' +
                '<div class="chain-year">' + entry.year + '</div>' +
                '<div class="chain-owner">' + entry.owner + '</div>' +
                '<div class="chain-details">Purchase Price: $' + (entry.price / 1000000).toFixed(1) + 'M</div>' +
              '</div>'
            ).join('') +
          '</div>' +
        '</div>' +
      '</div>';
    }

    function renderEnergyModule() {
      const content = document.getElementById('energyContent');
      const facilities = bcmeData.energyInfrastructure[currentCounty.name] || [];

      document.getElementById('energyCount').textContent = facilities.length;

      if (facilities.length === 0) {
        content.innerHTML = '<div class="bcme-empty">' +
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>' +
          '<div class="bcme-empty-text">No Energy Infrastructure</div>' +
          '<div class="bcme-empty-subtext">No energy facilities recorded</div>' +
          '</div>';
        return;
      }

      content.innerHTML = facilities.map(f => {
        const iconType = f.type.toLowerCase().replace(' ', '');
        return '<div class="bcme-card">' +
          '<div class="bcme-card-header">' +
            '<div style="display: flex; align-items: center; gap: 8px;">' +
              '<div class="energy-icon ' + iconType + '">⚡</div>' +
              '<div class="bcme-card-title">' + f.name + '</div>' +
            '</div>' +
            '<div class="bcme-card-badge ' + (f.status === 'Operational' ? 'active' : 'pending') + '">' + f.status.toUpperCase() + '</div>' +
          '</div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Type:</span><span class="bcme-card-value">' + f.type + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Capacity:</span><span class="bcme-card-value highlight">' + f.capacity + '</span></div>' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Year:</span><span class="bcme-card-value">' + f.year + '</span></div>' +
        '</div>';
      }).join('');
    }

    function renderCadModule() {
      const content = document.getElementById('cadContent');
      const cad = bcmeData.cadData[currentCounty.name];

      if (!cad) {
        content.innerHTML = '<div class="bcme-empty">' +
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>' +
          '<div class="bcme-empty-text">No CAD Data</div>' +
          '<div class="bcme-empty-subtext">Central Appraisal District data unavailable</div>' +
          '</div>';
        return;
      }

      content.innerHTML = '<div class="bcme-section">' +
        '<div class="bcme-section-header">' + cad.cadName + '</div>' +
        '<div class="bcme-card">' +
          '<div class="bcme-card-row"><span class="bcme-card-label">Website:</span><span class="bcme-card-value"><a href="' + cad.website + '" target="_blank" style="color: var(--cyan-primary);">' + cad.website + '</a></span></div>' +
        '</div>' +
        '<div style="margin-top: 16px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">' +
          '<div class="bcme-card">' +
            '<div style="font-size: 10px; color: var(--text-muted); margin-bottom: 4px;">Total Parcels</div>' +
            '<div style="font-size: 18px; font-weight: 600; color: var(--amber-primary);">' + cad.totalParcels.toLocaleString() + '</div>' +
          '</div>' +
          '<div class="bcme-card">' +
            '<div style="font-size: 10px; color: var(--text-muted); margin-bottom: 4px;">Total Value</div>' +
            '<div style="font-size: 18px; font-weight: 600; color: var(--green-primary);">$' + (cad.totalValue / 1000000000).toFixed(2) + 'B</div>' +
          '</div>' +
          '<div class="bcme-card">' +
            '<div style="font-size: 10px; color: var(--text-muted); margin-bottom: 4px;">Exemptions</div>' +
            '<div style="font-size: 18px; font-weight: 600; color: var(--cyan-primary);">$' + (cad.exemptions / 1000000).toFixed(0) + 'M</div>' +
          '</div>' +
          '<div class="bcme-card">' +
            '<div style="font-size: 10px; color: var(--text-muted); margin-bottom: 4px;">Taxable Value</div>' +
            '<div style="font-size: 18px; font-weight: 600; color: var(--purple-primary);">$' + (cad.taxableValue / 1000000000).toFixed(2) + 'B</div>' +
          '</div>' +
        '</div>' +
      '</div>';
    }

    function filterByRegion(region) {
      if (region === 'All') {
        filteredCounties = [...texasCounties];
      } else {
        filteredCounties = texasCounties.filter(c => c.region === region);
      }
      renderTable();

      document.querySelectorAll('.region-item').forEach(item => {
        item.classList.remove('active');
      });
      event.target.closest('.region-item').classList.add('active');
    }

    function setupEventListeners() {
      const searchInput = document.getElementById('searchInput');
      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        if (query === '') {
          const regionSelect = document.getElementById('regionSelect');
          if (regionSelect.value === 'All') {
            filteredCounties = [...texasCounties];
          } else {
            filteredCounties = texasCounties.filter(c => c.region === regionSelect.value);
          }
        } else {
          filteredCounties = texasCounties.filter(c =>
            c.name.toLowerCase().includes(query) ||
            c.seat.toLowerCase().includes(query) ||
            c.region.toLowerCase().includes(query)
          );
        }
        renderTable();
      });

      document.getElementById('regionSelect').addEventListener('change', function() {
        if (this.value === 'All') {
          filteredCounties = [...texasCounties];
        } else {
          filteredCounties = texasCounties.filter(c => c.region === this.value);
        }
        renderTable();
      });

      document.querySelectorAll('.bcme-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const module = this.getAttribute('data-module');
          currentModule = module;

          document.querySelectorAll('.bcme-tab').forEach(t => t.classList.remove('active'));
          this.classList.add('active');

          document.querySelectorAll('.bcme-module').forEach(m => m.classList.remove('active'));
          document.getElementById('module-' + module).classList.add('active');

          renderCurrentModule();
        });
      });

      const menuToggle = document.getElementById('menuToggle');
      const leftPanel = document.getElementById('leftPanel');
      const sidebarOverlay = document.getElementById('sidebarOverlay');
      const sidebarClose = document.getElementById('sidebarClose');
      const swipeHandle = document.getElementById('swipeHandle');

      menuToggle.addEventListener('click', function() {
        leftPanel.classList.add('open');
        sidebarOverlay.classList.add('visible');
        swipeHandle.classList.add('hidden');
      });

      sidebarClose.addEventListener('click', function() {
        leftPanel.classList.remove('open');
        sidebarOverlay.classList.remove('visible');
        swipeHandle.classList.remove('hidden');
      });

      sidebarOverlay.addEventListener('click', function() {
        leftPanel.classList.remove('open');
        sidebarOverlay.classList.remove('visible');
        swipeHandle.classList.remove('hidden');
      });

      swipeHandle.addEventListener('click', function() {
        leftPanel.classList.add('open');
        sidebarOverlay.classList.add('visible');
        swipeHandle.classList.add('hidden');
      });
    }
  </script>
</body>
</html>